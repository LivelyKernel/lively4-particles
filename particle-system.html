<link rel="import" href="../lively4-particles/templates/turtle-canvas.html">

<lively-turtle-canvas id="tCanvas">
Test
</lively-turtle-canvas>

<br>

<button type="button" id="StepButton" onclick="step()">Step</button>
<button type="button" id="StartButton" onclick="startSim()">Start</button>
<button type="button" id="PauseButton" onclick="pauseSim()" disabled="">Pause</button>
<button type="button" id="ResetButton" onclick="reset()">Reset</button>

<br>

<input id="clearColor" type="color" value="#FFFFFF">

<br>

<span id="info">(reset)</span>

<lively-window title="Particle Spawning" style="z-index: 100;">
<juicy-ace-editor id="spawningCode">
for (var i = 0; i &lt; 100; i++)
{
  var part = {
    turtle: {
      pos: {
        x: 300,
        y: 400
      },
      heading: (Math.random() * 120 + 210)
    },
    velocity: (Math.random() * 128 + 32)
  };

  particles.push(part);
}
</juicy-ace-editor>
</lively-window>
<lively-window title="Particle Movement" style="z-index: 102;" active="true">
<juicy-ace-editor id="movementCode">
turtle.penUp();
turtle.setColor(Math.round(particle.velocity * 20),
                Math.round(particle.velocity * 5),
                Math.round(particle.velocity * 0.5));
turtle.forward(particle.velocity * 0.1);
turtle.backward(1);
turtle.penDown();
turtle.forward(1);

if (Math.random() &lt; 0.5)
	turtle.left(Math.random()*10);
else
	turtle.right(Math.random()*10);

turtle.right(90);

if (turtle.getHeading() &gt; 180)
	turtle.left(360);

// -180 &lt; turtle.heading &lt;= 180
turtle.setHeading(turtle.getHeading() * 0.8);

turtle.left(90);

particle.velocity *= 0.9;
return particle.velocity &gt; 5;
</juicy-ace-editor>
</lively-window>
<script type="text/javascript">
  var loaded = false;
  lively.loadJavaScriptThroughDOM("lively-turtle-canvas", "../lively4-particles/templates/turtle-canvas.js").then( ()=> {
      return lively.loadJavaScriptThroughDOM("lively-turtle-canvas", "../lively4-particles/js/particle-system.js")
  }).then( () => {
    lively.notify("insert lively-turtle-canvas div")
  })
</script>
